import{S as ie,y as W,z as w,A as Q,B as M,C as re,D as A,E as D,G as ne,H as z,I as oe,J as ae,K as F,L as ce,h as ue,i as le,M as he,l as O,N as de,O as fe,P as pe,Q as P,R as ge,T as me,U as ve,V as ye,W as L,X as N,Y as T,Z as be,_ as V,$ as U,a0 as we,a1 as B,a2 as Se,e as Z,a3 as Re,m as Oe,a4 as Ce,a5 as Ie,a6 as Me,c as ke,v as xe,o as _e,a7 as H,a8 as Ee}from"./Cdn-dyk6.js";var ze=class extends ie{constructor(e,t){super(),this.options=t,this.#s=e,this.#r=null,this.#i=W(),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#p=void 0;#t=void 0;#o;#l;#i;#r;#g;#h;#d;#a;#c;#n;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),K(this.#e,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return $(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#S(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,i=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof w(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#R(),this.#e.setOptions(this.options),t._defaulted&&!Q(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const s=this.hasListeners();s&&G(this.#e,i,this.options,t)&&this.#u(),this.updateResult(),s&&(this.#e!==i||w(this.options.enabled,this.#e)!==w(t.enabled,this.#e)||M(this.options.staleTime,this.#e)!==M(t.staleTime,this.#e))&&this.#m();const r=this.#v();s&&(this.#e!==i||w(this.options.enabled,this.#e)!==w(t.enabled,this.#e)||r!==this.#n)&&this.#y(r)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),i=this.createResult(t,e);return Qe(this,i)&&(this.#t=i,this.#l=this.options,this.#o=this.#e.state),i}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(i,s)=>(this.trackProp(s),t?.(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(i,s))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),i=this.#s.getQueryCache().build(this.#s,t);return i.fetch().then(()=>this.createResult(i,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#u(e){this.#R();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(re)),t}#m(){this.#w();const e=M(this.options.staleTime,this.#e);if(A||this.#t.isStale||!D(e))return;const i=ne(this.#t.dataUpdatedAt,e)+1;this.#a=z.setTimeout(()=>{this.#t.isStale||this.updateResult()},i)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(e){this.#S(),this.#n=e,!(A||w(this.options.enabled,this.#e)===!1||!D(this.#n)||this.#n===0)&&(this.#c=z.setInterval(()=>{(this.options.refetchIntervalInBackground||oe.isFocused())&&this.#u()},this.#n))}#b(){this.#m(),this.#y(this.#v())}#w(){this.#a&&(z.clearTimeout(this.#a),this.#a=void 0)}#S(){this.#c&&(z.clearInterval(this.#c),this.#c=void 0)}createResult(e,t){const i=this.#e,s=this.options,r=this.#t,n=this.#o,o=this.#l,f=e!==i?e.state:this.#p,{state:v}=e;let u={...v},y=!1,l;if(t._optimisticResults){const b=this.hasListeners(),_=!b&&K(e,t),C=b&&G(e,i,t,s);(_||C)&&(u={...u,...ae(v.data,e.options)}),t._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:h,errorUpdatedAt:m,status:g}=u;l=u.data;let R=!1;if(t.placeholderData!==void 0&&l===void 0&&g==="pending"){let b;r?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(b=r.data,R=!0):b=typeof t.placeholderData=="function"?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,b!==void 0&&(g="success",l=F(r?.data,b,t),y=!0)}if(t.select&&l!==void 0&&!R)if(r&&l===n?.data&&t.select===this.#g)l=this.#h;else try{this.#g=t.select,l=t.select(l),l=F(r?.data,l,t),this.#h=l,this.#r=null}catch(b){this.#r=b}this.#r&&(h=this.#r,l=this.#h,m=Date.now(),g="error");const d=u.fetchStatus==="fetching",c=g==="pending",p=g==="error",k=c&&d,x=l!==void 0,S={status:g,fetchStatus:u.fetchStatus,isPending:c,isSuccess:g==="success",isError:p,isInitialLoading:k,isLoading:k,data:l,dataUpdatedAt:u.dataUpdatedAt,error:h,errorUpdatedAt:m,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>f.dataUpdateCount||u.errorUpdateCount>f.errorUpdateCount,isFetching:d,isRefetching:d&&!c,isLoadingError:p&&!x,isPaused:u.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:p&&x,isStale:j(e,t),refetch:this.refetch,promise:this.#i,isEnabled:w(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const b=E=>{S.status==="error"?E.reject(S.error):S.data!==void 0&&E.resolve(S.data)},_=()=>{const E=this.#i=S.promise=W();b(E)},C=this.#i;switch(C.status){case"pending":e.queryHash===i.queryHash&&b(C);break;case"fulfilled":(S.status==="error"||S.data!==C.value)&&_();break;case"rejected":(S.status!=="error"||S.error!==C.reason)&&_();break}}return S}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#o=this.#e.state,this.#l=this.options,this.#o.data!==void 0&&(this.#d=this.#e),Q(t,e))return;this.#t=t;const i=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,r=typeof s=="function"?s():s;if(r==="all"||!r&&!this.#f.size)return!0;const n=new Set(r??this.#f);return this.options.throwOnError&&n.add("error"),Object.keys(this.#t).some(o=>{const a=o;return this.#t[a]!==e[a]&&n.has(a)})};this.#O({listeners:i()})}#R(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#p=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#O(e){ce.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Pe(e,t){return w(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function K(e,t){return Pe(e,t)||e.state.data!==void 0&&$(e,t,t.refetchOnMount)}function $(e,t,i){if(w(t.enabled,e)!==!1&&M(t.staleTime,e)!=="static"){const s=typeof i=="function"?i(e):i;return s==="always"||s!==!1&&j(e,t)}return!1}function G(e,t,i,s){return(e!==t||w(s.enabled,e)===!1)&&(!i.suspense||e.state.status!=="error")&&j(e,i)}function j(e,t){return w(t.enabled,e)!==!1&&e.isStaleByTime(M(t.staleTime,e))}function Qe(e,t){return!Q(e.getCurrentResult(),t)}function Ue(e=""){if(!ue())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const t=he(e),i=le(t);if(!i)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return i}function $e(e,t,i){const s=Ue(),r=O(()=>{let h=t;typeof h=="function"&&(h=h());const m=de(h);typeof m.enabled=="function"&&(m.enabled=m.enabled());const g=s.defaultQueryOptions(m);return g._optimisticResults=s.isRestoring?.value?"isRestoring":"optimistic",g}),n=new e(s,r.value),o=r.value.shallow?fe(n.getCurrentResult()):pe(n.getCurrentResult());let a=()=>{};s.isRestoring&&P(s.isRestoring,h=>{h||(a(),a=n.subscribe(m=>{N(o,m)}))},{immediate:!0});const f=()=>{n.setOptions(r.value),N(o,n.getCurrentResult())};P(r,f),ge(()=>{a()});const v=(...h)=>(f(),o.refetch(...h)),u=()=>new Promise((h,m)=>{let g=()=>{};const R=()=>{if(r.value.enabled!==!1){n.setOptions(r.value);const d=n.getOptimisticResult(r.value);d.isStale?(g(),n.fetchOptimistic(r.value).then(h,c=>{L(r.value.throwOnError,[c,n.getCurrentQuery()])?m(c):h(n.getCurrentResult())})):(g(),h(d))}};R(),g=P(r,R)});P(()=>o.error,h=>{if(o.isError&&!o.isFetching&&L(r.value.throwOnError,[h,n.getCurrentQuery()]))throw h});const y=r.value.shallow?me(o):ve(o),l=ye(y);for(const h in o)typeof o[h]=="function"&&(l[h]=o[h]);return l.suspense=u,l.refetch=v,l}function it(e,t){return $e(ze,e)}async function Te(e,t){return await je(t).catch(s=>(console.error("Failed to get image meta for "+t,s+""),{width:0,height:0,ratio:0}))}async function je(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((t,i)=>{const s=new Image;s.onload=()=>{const r={width:s.width,height:s.height,ratio:s.width/s.height};t(r)},s.onerror=r=>i(r),s.src=e})}function Y(e){return(t=>t!==void 0?e[t]||t:e.missingValue)}function qe(e={}){const t=e.formatter,i=e.keyMap&&typeof e.keyMap!="function"?Y(e.keyMap):e.keyMap,s={};for(const r in e.valueMap){const n=r,o=e.valueMap[n];s[n]=typeof o=="object"?Y(o):o}return r=>{const n=[];for(const o in r){const a=o;if(typeof r[a]>"u")continue;const f=typeof s[a]=="function"?s[a](r[a]):r[a];n.push([i?i(a):a,f])}return t?n.map(o=>t(...o)).join(e.joinWith??"&"):new URLSearchParams(n).toString()}}function We(e=""){if(e===void 0||!e.length)return[];const t=new Set;for(const i of e.split(" ")){const s=Number.parseInt(i.replace("x",""));s&&t.add(s)}return Array.from(t)}function Ae(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function I(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return Number.parseInt(e,10)}function De(e){const t={};if(typeof e=="string")for(const i of e.split(/[\s,]+/).filter(s=>s)){const s=i.split(":");s.length!==2?t["1px"]=s[0].trim():t[s[0].trim()]=s[1].trim()}else Object.assign(t,e);return t}function Fe(e){const t={options:e},i=(r,n={})=>ee(t,r,n),s=((r,n,o)=>i(r,T({modifiers:n},o)).url);for(const r in e.presets)s[r]=((n,o,a)=>s(n,o,{...e.presets[r],...a}));return s.options=e,s.getImage=i,s.getMeta=((r,n)=>Le(t,r,n)),s.getSizes=((r,n)=>Ve(t,r,n)),t.$img=s,s}async function Le(e,t,i){const s=ee(e,t,{...i});return typeof s.getMeta=="function"?await s.getMeta():await Te(e,s.url)}function ee(e,t,i){if(t&&typeof t!="string")throw new TypeError(`input must be a string (received ${typeof t}: ${JSON.stringify(t)})`);if(!t||t.startsWith("data:"))return{url:t};const{setup:s,defaults:r}=Ne(e,i.provider||e.options.provider),n=s(),o=te(e,i.preset);if(t=V(t)?t:be(t),!n.supportsAlias){for(const u in e.options.alias)if(t.startsWith(u)){const y=e.options.alias[u];y&&(t=U(y,t.slice(u.length)))}}if(n.validateDomains&&V(t)){const u=we(t).host;if(!e.options.domains.find(y=>y===u))return{url:t}}const a=T(i,o,r),f={...a,modifiers:{...a.modifiers,width:a.modifiers?.width?I(a.modifiers.width):void 0,height:a.modifiers?.height?I(a.modifiers.height):void 0}},v=n.getImage(t,f,e);return v.format||=f.modifiers.format||"",v}function Ne(e,t){const i=e.options.providers[t];if(!i)throw new Error("Unknown provider: "+t);return i}function te(e,t){if(!t)return{};if(!e.options.presets[t])throw new Error("Unknown preset: "+t);return e.options.presets[t]}function Ve(e,t,i){const s=te(e,i.preset),r=T(i,s),n=I(r.modifiers?.width),o=I(r.modifiers?.height),a=r.sizes?De(r.sizes):{},f=r.densities?.trim(),v=f?We(f):e.options.densities;Ae(v);const u=n&&o?o/n:0,y=[],l=[];if(Object.keys(a).length>=1){for(const d in a){const c=J(d,String(a[d]),o,u,e);if(c!==void 0){y.push({size:c.size,screenMaxWidth:c.screenMaxWidth,media:`(max-width: ${c.screenMaxWidth}px)`});for(const p of v)l.push({width:c._cWidth*p,src:X(e,t,i,c,p)})}}Be(y)}else for(const d of v){const c=Object.keys(a)[0];let p=c?J(c,String(a[c]),o,u,e):void 0;p===void 0&&(p={size:"",screenMaxWidth:0,_cWidth:i.modifiers?.width,_cHeight:i.modifiers?.height}),l.push({width:d,src:X(e,t,i,p,d)})}He(l);const h=l[l.length-1],m=y.length?y.map(d=>`${d.media?d.media+" ":""}${d.size}`).join(", "):void 0,g=m?"w":"x",R=l.map(d=>`${d.src} ${d.width}${g}`).join(", ");return{sizes:m,srcset:R,src:h?.src}}function J(e,t,i,s,r){const n=r.options.screens&&r.options.screens[e]||Number.parseInt(e),o=t.endsWith("vw");if(!o&&/^\d+$/.test(t)&&(t=t+"px"),!o&&!t.endsWith("px"))return;let a=Number.parseInt(t);if(!n||!a)return;o&&(a=Math.round(a/100*n));const f=s?Math.round(a*s):i;return{size:t,screenMaxWidth:n,_cWidth:a,_cHeight:f}}function X(e,t,i,s,r){return e.$img(t,{...i.modifiers,width:s._cWidth?s._cWidth*r:void 0,height:s._cHeight?s._cHeight*r:void 0},i)}function Be(e){e.sort((i,s)=>i.screenMaxWidth-s.screenMaxWidth);let t=null;for(let i=e.length-1;i>=0;i--){const s=e[i];s.media===t&&e.splice(i,1),t=s.media}for(let i=0;i<e.length;i++)e[i].media=e[i+1]?.media||""}function He(e){e.sort((i,s)=>i.width-s.width);let t=null;for(let i=e.length-1;i>=0;i--){const s=e[i];s.width===t&&e.splice(i,1),t=s.width}}function Ke(e){let t;return()=>t||(t=typeof e=="function"?e():e,t)}const Ge=qe({keyMap:{format:"f",width:"w",height:"h",resize:"s",quality:"q",background:"b",position:"pos"},formatter:(e,t)=>B(e)+"_"+B(t.toString())}),Ye=Ke({validateDomains:!0,supportsAlias:!0,getImage(e,{modifiers:t,baseURL:i},s){t.width&&t.height&&(t.resize=`${t.width}x${t.height}`,delete t.width,delete t.height);const r=Ge(t)||"_";return i||(i=U(s.options.nuxt.baseURL,"/_ipx")),{url:U(i,r,Se(e).replace(/\/{2,}/g,"/"))}}}),Je={screens:{sm:640,md:768,lg:1024,xl:1280,"2xl":1536},presets:{},provider:"ipxStatic",domains:[],alias:{},densities:[1,2],format:["webp"],provider:"ipxStatic",providers:{ipxStatic:{setup:Ye,defaults:{}}}},se=e=>{const t=Re(),i=Z();return i.$img||i._img||(i._img=Fe({...Je,event:i.ssrContext?.event,nuxt:{baseURL:t.app.baseURL},runtimeConfig:t}))};function Xe(e){performance?.mark?.("mark_feature_usage",{detail:{feature:e}})}const Ze=e=>{const t=se(),i=O(()=>({provider:e.provider,preset:e.preset})),s=O(()=>({width:I(e.width),height:I(e.height),crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,nonce:e.nonce})),r=O(()=>({...e.modifiers,width:e.width,height:e.height,format:e.format,quality:e.quality||t.options.quality,background:e.background,fit:e.fit}));return{providerOptions:i,normalizedAttrs:s,imageModifiers:r}},et=["src"],tt={__name:"NuxtImg",props:{custom:{type:Boolean,required:!1},placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1},src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[String,Number],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:null,required:!1},sizes:{type:[String,Object],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},crossorigin:{type:[String,Boolean],required:!1},nonce:{type:String,required:!1}},emits:["load","error"],setup(e,{expose:t,emit:i}){const s=e,r=i,n=se(),{providerOptions:o,normalizedAttrs:a,imageModifiers:f}=Ze(s),v=O(()=>n.getSizes(s.src,{...o.value,sizes:s.sizes,densities:s.densities,modifiers:f.value})),u=Oe(!1),y=Ce(),l=O(()=>({...a.value,"data-nuxt-img":"",...!s.placeholder||u.value?{sizes:v.value.sizes,srcset:v.value.srcset}:{},...y})),h=O(()=>{if(u.value)return!1;const c=s.placeholder===""?[10,10]:s.placeholder;if(!c)return!1;if(typeof c=="string")return c;const[p=10,k=p,x=50,q=3]=Array.isArray(c)?c:typeof c=="number"?[c]:[];return n(s.src,{...f.value,width:p,height:k,quality:x,blur:q},o.value)}),m=O(()=>s.sizes?v.value.src:n(s.src,f.value,o.value)),g=O(()=>h.value||m.value),R=Z().isHydrating,d=Ie("imgEl");return t({imgEl:d}),Me(()=>{if(h.value||s.custom){const c=new Image;m.value&&(c.src=m.value),s.sizes&&(c.sizes=v.value.sizes||"",c.srcset=v.value.srcset),c.decode?c.decode().then(()=>{u.value=!0,r("load",new Event("load"))}).catch(p=>{r("error",p)}):(c.onload=p=>{u.value=!0,r("load",p)},c.onerror=p=>{r("error",p)}),Xe("nuxt-image");return}d.value&&(d.value.complete&&R&&(d.value.getAttribute("data-error")?r("error",new Event("error")):r("load",new Event("load"))),d.value.onload=c=>{r("load",c)},d.value.onerror=c=>{r("error",c)})}),(c,p)=>e.custom?xe(c.$slots,"default",Ee(H({key:1},{imgAttrs:l.value,isLoaded:u.value,src:g.value}))):(_e(),ke("img",H({key:0,ref_key:"imgEl",ref:d,class:h.value?e.placeholderClass:void 0},l.value,{src:g.value}),null,16,et))}},rt=Object.assign(tt,{__name:"NuxtImg"}),nt=()=>{const t="public_RiNvjTVVzKLhFNWyzR5fNY68u1GMHLEs",i="https://app.ecwid.com/api/v3/108362264",s=(r,n={})=>{const o=new URLSearchParams({token:t,...n}).toString();return $fetch(`${i}/${r}?${o}`)};return{getCategories:(r={})=>s("categories",r),getCategory:r=>s(`categories/${r}`),getProducts:(r={})=>s("products",r),getProduct:r=>s(`products/${r}`)}};export{rt as N,nt as a,it as u};
